<Window x:Class="TouchKeyboardMouse.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:TouchKeyboardMouse.Controls"
        Title="Touch Keyboard &amp; Mouse"
        WindowStyle="None"
        WindowState="Maximized"
        AllowsTransparency="False"
        Topmost="True"
        Background="#1a1a1a"
        ShowInTaskbar="True"
        ResizeMode="CanResize"
        MinWidth="800"
        MinHeight="400"
        Loaded="Window_Loaded">
    
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="40" ResizeBorderThickness="6" GlassFrameThickness="0"/>
    </WindowChrome.WindowChrome>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        
        <!-- Main Content -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <!-- Top bar with controls -->
                <RowDefinition Height="40"/>
                <!-- Keyboard area (2/3 of content) -->
                <RowDefinition Height="2*"/>
                <!-- Trackpad area (1/3 of content) -->
                <RowDefinition x:Name="TrackpadRow" Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Top Control Bar -->
            <Border Grid.Row="0" Background="#0d0d0d" BorderBrush="#333" BorderThickness="0,0,0,1"
                    WindowChrome.IsHitTestVisibleInChrome="True">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">
                        <TextBlock Text="Touch Keyboard &amp; Mouse" Foreground="#888" FontSize="14" VerticalAlignment="Center"/>
                        <TextBlock x:Name="PostureStatusText" Text="" Foreground="#666" FontSize="12" 
                                   VerticalAlignment="Center" Margin="15,0,0,0"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">
                        <!-- Settings toggle button -->
                        <Button x:Name="SettingsButton" Style="{StaticResource ControlButtonStyle}" 
                                Content="⚙" Click="SettingsButton_Click" ToolTip="Settings"/>
                        <!-- Fullscreen toggle button -->
                        <Button x:Name="FullscreenButton" Style="{StaticResource ControlButtonStyle}" 
                                Content="⛶" Click="FullscreenButton_Click" ToolTip="Toggle Fullscreen (F11)"/>
                        <!-- Minimize button -->
                        <Button x:Name="MinimizeButton" Style="{StaticResource ControlButtonStyle}" 
                                Content="−" Click="MinimizeButton_Click" ToolTip="Minimize"/>
                        <!-- Close button -->
                        <Button x:Name="CloseButton" Style="{StaticResource CloseButtonStyle}" 
                                Content="✕" Click="CloseButton_Click" ToolTip="Exit (Esc)"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Keyboard -->
            <local:VirtualKeyboard x:Name="Keyboard" Grid.Row="1" Margin="5"/>
            
            <!-- Trackpad with resize grips -->
            <Grid x:Name="TrackpadContainer" Grid.Row="2" Margin="5,0,5,5">
                <!-- Left resize grip -->
                <Border x:Name="LeftResizeGrip" HorizontalAlignment="Left" Width="12" Background="Transparent" Cursor="SizeWE"
                        MouseDown="ResizeGrip_MouseDown" MouseMove="ResizeGrip_MouseMove" MouseUp="ResizeGrip_MouseUp"
                        Panel.ZIndex="10">
                    <Border Width="4" Height="50" Background="#444" CornerRadius="2" VerticalAlignment="Center"
                            Margin="4,0,0,0"/>
                </Border>
                
                <!-- Trackpad -->
                <local:Trackpad x:Name="Trackpad" HorizontalAlignment="Center" MinWidth="300"/>
                
                <!-- Right resize grip -->
                <Border x:Name="RightResizeGrip" HorizontalAlignment="Right" Width="12" Background="Transparent" Cursor="SizeWE"
                        MouseDown="ResizeGrip_MouseDown" MouseMove="ResizeGrip_MouseMove" MouseUp="ResizeGrip_MouseUp"
                        Panel.ZIndex="10">
                    <Border Width="4" Height="50" Background="#444" CornerRadius="2" VerticalAlignment="Center"
                            Margin="0,0,4,0"/>
                </Border>
            </Grid>
        </Grid>
        
        <!-- Settings Sidebar -->
        <Border x:Name="SettingsSidebar" Grid.Column="1" Width="280" Background="#181818" 
                BorderBrush="#333" BorderThickness="1,0,0,0" Visibility="Collapsed">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- Sidebar Header -->
                <Border Grid.Row="0" Background="#1a1a1a" BorderBrush="#333" BorderThickness="0,0,0,1">
                    <Grid>
                        <TextBlock Text="Settings" Foreground="White" FontSize="16" FontWeight="SemiBold"
                                   VerticalAlignment="Center" Margin="15,0,0,0"/>
                        <Button HorizontalAlignment="Right" Style="{StaticResource ControlButtonStyle}"
                                Content="✕" Click="CloseSettings_Click" Margin="0,0,5,0"
                                WindowChrome.IsHitTestVisibleInChrome="True"/>
                    </Grid>
                </Border>
                
                <!-- Settings Content -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="15,10,15,15">
                    <StackPanel>
                        <!-- Trackpad Section -->
                        <TextBlock Text="TRACKPAD" Foreground="#666" FontSize="11" FontWeight="SemiBold" Margin="0,0,0,10"/>
                        
                        <TextBlock Text="Drag the trackpad edges to resize" Foreground="#666" FontSize="11" 
                                   FontStyle="Italic" Margin="0,0,0,15"/>
                        
                        <TextBlock Text="Cursor Speed" Foreground="#ccc" FontSize="13" Margin="0,0,0,5"/>
                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="45"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="CursorSensitivitySlider" 
                                    Minimum="0.5" Maximum="3" Value="1.5" 
                                    TickFrequency="0.1" IsSnapToTickEnabled="True"
                                    ValueChanged="CursorSensitivitySlider_ValueChanged"/>
                            <TextBlock x:Name="CursorSensitivityValue" Grid.Column="1" Text="1.5x" 
                                       Foreground="#888" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <TextBlock Text="Scroll Speed" Foreground="#ccc" FontSize="13" Margin="0,0,0,5"/>
                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="45"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="ScrollSensitivitySlider" 
                                    Minimum="0.5" Maximum="5" Value="2.0" 
                                    TickFrequency="0.1" IsSnapToTickEnabled="True"
                                    ValueChanged="ScrollSensitivitySlider_ValueChanged"/>
                            <TextBlock x:Name="ScrollSensitivityValue" Grid.Column="1" Text="2.0x" 
                                       Foreground="#888" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <TextBlock Text="Tap Sensitivity" Foreground="#ccc" FontSize="13" Margin="0,0,0,5"/>
                        <Grid Margin="0,0,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="45"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="TapThresholdSlider" 
                                    Minimum="100" Maximum="500" Value="200" 
                                    TickFrequency="25" IsSnapToTickEnabled="True"
                                    ValueChanged="TapThresholdSlider_ValueChanged"/>
                            <TextBlock x:Name="TapThresholdValue" Grid.Column="1" Text="200ms" 
                                       Foreground="#888" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <!-- Window Section -->
                        <Border Height="1" Background="#333" Margin="0,0,0,15"/>
                        <TextBlock Text="WINDOW" Foreground="#666" FontSize="11" FontWeight="SemiBold" Margin="0,0,0,10"/>
                        
                        <CheckBox x:Name="AlwaysOnTopCheckBox" Content="Always on top" 
                                  Foreground="#ccc" IsChecked="True" Margin="0,5"
                                  Checked="AlwaysOnTopCheckBox_Changed" Unchecked="AlwaysOnTopCheckBox_Changed"/>
                        
                        <!-- Reset Button -->
                        <Border Height="1" Background="#333" Margin="0,20,0,15"/>
                        <Button Content="Reset to Defaults" Style="{StaticResource ControlButtonStyle}"
                                Height="32" Click="ResetDefaults_Click" HorizontalAlignment="Stretch"
                                WindowChrome.IsHitTestVisibleInChrome="True"/>
                        
                        <!-- About -->
                        <Border Height="1" Background="#333" Margin="0,20,0,15"/>
                        <TextBlock Text="ABOUT" Foreground="#666" FontSize="11" FontWeight="SemiBold" Margin="0,0,0,10"/>
                        <TextBlock Text="Touch Keyboard &amp; Mouse v1.0" Foreground="#ccc" FontSize="12"/>
                        <TextBlock Text="Virtual input for dual-screen devices" Foreground="#666" FontSize="11" Margin="0,3,0,0"/>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Border>
    </Grid>
</Window>
